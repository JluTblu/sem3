/*
 * ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ И ОБЪЯСНЕНИЯ
 * Калькулятор конечной арифметики (Вариант 48)
 */

#include "finite_arithmetic.h"
#include <iostream>

using namespace std;

void example_basic_operations() {
    cout << "═══════════════════════════════════════════════════" << endl;
    cout << "  ПРИМЕРЫ БАЗОВЫХ ОПЕРАЦИЙ" << endl;
    cout << "═══════════════════════════════════════════════════" << endl;
    
    FiniteArithmetic calc;
    
    // Пример 1: Простое сложение
    cout << "\n1. Простое сложение:" << endl;
    cout << "   b + b = " << calc.add("b", "b") << endl;
    cout << "   Объяснение: 1 + 1 = 2 → b + b = c" << endl;
    
    // Пример 2: Сложение с переходом через разряд
    cout << "\n2. Сложение с переходом через разряд:" << endl;
    cout << "   g + c = " << calc.add("g", "c") << endl;
    cout << "   Объяснение: 6 + 2 = 8 → g + c = ba (1×8 + 0)" << endl;
    
    // Пример 3: Умножение
    cout << "\n3. Умножение:" << endl;
    cout << "   c * d = " << calc.multiply("c", "d") << endl;
    cout << "   Объяснение: 2 × 3 = 6 → c * d = g" << endl;
}

void example_negative_numbers() {
    cout << "\n═══════════════════════════════════════════════════" << endl;
    cout << "  РАБОТА С ОТРИЦАТЕЛЬНЫМИ ЧИСЛАМИ" << endl;
    cout << "═══════════════════════════════════════════════════" << endl;
    
    FiniteArithmetic calc;
    
    // Пример 1: Сложение положительного и отрицательного
    cout << "\n1. Сложение положительного и отрицательного:" << endl;
    cout << "   e + (-c) = " << calc.add("e", "-c") << endl;
    cout << "   Объяснение: 4 + (-2) = 2 → e + (-c) = c" << endl;
    
    // Пример 2: Сложение двух отрицательных
    cout << "\n2. Сложение двух отрицательных:" << endl;
    cout << "   -e + (-c) = " << calc.add("-e", "-c") << endl;
    cout << "   Объяснение: (-4) + (-2) = -6 → -e + (-c) = -g" << endl;
    
    // Пример 3: Вычитание с отрицательным результатом
    cout << "\n3. Вычитание с отрицательным результатом:" << endl;
    cout << "   c - e = " << calc.subtract("c", "e") << endl;
    cout << "   Объяснение: 2 - 4 = -2 → c - e = -c" << endl;
    
    // Пример 4: Умножение чисел с разными знаками
    cout << "\n4. Умножение чисел с разными знаками:" << endl;
    cout << "   c * (-d) = " << calc.multiply("c", "-d") << endl;
    cout << "   Объяснение: 2 × (-3) = -6 → c * (-d) = -g" << endl;
    
    // Пример 5: Умножение двух отрицательных
    cout << "\n5. Умножение двух отрицательных:" << endl;
    cout << "   -c * (-d) = " << calc.multiply("-c", "-d") << endl;
    cout << "   Объяснение: (-2) × (-3) = 6 → -c * (-d) = g" << endl;
}

void example_division() {
    cout << "\n═══════════════════════════════════════════════════" << endl;
    cout << "  ДЕЛЕНИЕ С ОСТАТКОМ" << endl;
    cout << "═══════════════════════════════════════════════════" << endl;
    
    FiniteArithmetic calc;
    
    // Пример 1: Деление нацело
    cout << "\n1. Деление нацело:" << endl;
    cout << "   g ÷ c = " << calc.divide("g", "c") << endl;
    cout << "   Объяснение: 6 ÷ 2 = 3 остаток 0" << endl;
    cout << "   Проверка: 3 × 2 + 0 = 6 ✓" << endl;
    
    // Пример 2: Деление с остатком
    cout << "\n2. Деление с остатком:" << endl;
    cout << "   h ÷ d = " << calc.divide("h", "d") << endl;
    cout << "   Объяснение: 7 ÷ 3 = 2 остаток 1" << endl;
    cout << "   Проверка: 2 × 3 + 1 = 7 ✓" << endl;
}

void example_negative_division() {
    cout << "\n═══════════════════════════════════════════════════" << endl;
    cout << "  ДЕЛЕНИЕ ОТРИЦАТЕЛЬНЫХ ЧИСЕЛ (ВАЖНО!)" << endl;
    cout << "═══════════════════════════════════════════════════" << endl;
    
    FiniteArithmetic calc;
    
    // Пример 1: Деление отрицательного на положительное БЕЗ остатка
    cout << "\n1. Деление отрицательного на положительное (нацело):" << endl;
    cout << "   -g ÷ c = " << calc.divide("-g", "c") << endl;
    cout << "   Объяснение: (-6) ÷ 2 = -3 остаток 0" << endl;
    cout << "   Остаток = 0, поэтому обычное деление" << endl;
    cout << "   Проверка: (-3) × 2 + 0 = -6 ✓" << endl;
    
    // Пример 2: ОСОБЫЙ СЛУЧАЙ - деление отрицательного с остатком
    cout << "\n2. Деление отрицательного на положительное (С ОСТАТКОМ):" << endl;
    cout << "   -h ÷ d = " << calc.divide("-h", "d") << endl;
    cout << "   Объяснение: (-7) ÷ 3" << endl;
    cout << "   ⚠ ВНИМАНИЕ! Это ОСОБЫЙ СЛУЧАЙ!" << endl;
    cout << "   Обычное деление: 7 ÷ 3 = 2(1)" << endl;
    cout << "   Но для отрицательных:" << endl;
    cout << "     1. Частное: 2 + 1 = 3 → -3" << endl;
    cout << "     2. Остаток: 3 - 1 = 2" << endl;
    cout << "   Результат: -3(2)" << endl;
    cout << "   Проверка: (-3) × 3 + 2 = -9 + 2 = -7 ✓" << endl;
    
    // Пример 3: Ещё один пример
    cout << "\n3. Ещё один пример особого случая:" << endl;
    cout << "   -h ÷ c = " << calc.divide("-h", "c") << endl;
    cout << "   Объяснение: (-7) ÷ 2" << endl;
    cout << "   Обычное деление: 7 ÷ 2 = 3(1)" << endl;
    cout << "   Для отрицательных:" << endl;
    cout << "     1. Частное: 3 + 1 = 4 → -4" << endl;
    cout << "     2. Остаток: 2 - 1 = 1" << endl;
    cout << "   Результат: -4(1) → -e(b)" << endl;
    cout << "   Проверка: (-4) × 2 + 1 = -8 + 1 = -7 ✓" << endl;
    
    // Пример 4: Деление положительного на отрицательное
    cout << "\n4. Деление положительного на отрицательное:" << endl;
    cout << "   h ÷ (-d) = " << calc.divide("h", "-d") << endl;
    cout << "   Объяснение: 7 ÷ (-3) = -2(1)" << endl;
    cout << "   Здесь обычное правило, просто результат отрицательный" << endl;
    cout << "   Проверка: (-2) × (-3) + 1 = 6 + 1 = 7 ✓" << endl;
}

void example_special_cases() {
    cout << "\n═══════════════════════════════════════════════════" << endl;
    cout << "  СПЕЦИАЛЬНЫЕ СЛУЧАИ" << endl;
    cout << "═══════════════════════════════════════════════════" << endl;
    
    FiniteArithmetic calc;
    
    // Пример 1: Деление на ноль
    cout << "\n1. Деление на ноль:" << endl;
    cout << "   c ÷ a = " << calc.divide("c", "a") << endl;
    cout << "   Объяснение: 2 ÷ 0 = Ø (пустое множество)" << endl;
    
    // Пример 2: Деление нуля на ноль
    cout << "\n2. Деление нуля на ноль:" << endl;
    cout << "   a ÷ a = " << calc.divide("a", "a") << endl;
    cout << "   Объяснение: 0 ÷ 0 = диапазон всех возможных чисел" << endl;
    
    // Пример 3: Свойство x * a = a
    cout << "\n3. Свойство x × 0 = 0:" << endl;
    cout << "   c * a = " << calc.multiply("c", "a") << endl;
    cout << "   ba * a = " << calc.multiply("ba", "a") << endl;
    cout << "   Объяснение: Любое число, умноженное на ноль, даёт ноль" << endl;
    
    // Пример 4: Переполнение
    cout << "\n4. Переполнение:" << endl;
    try {
        string maxNum = "hhhhhhhh";  // Максимальное число (8 разрядов)
        cout << "   " << maxNum << " + b = ";
        string result = calc.add(maxNum, "b");
        cout << result << endl;
    } catch (const overflow_error& e) {
        cout << "ОШИБКА!" << endl;
        cout << "   " << e.what() << endl;
    }
}

void example_properties() {
    cout << "\n═══════════════════════════════════════════════════" << endl;
    cout << "  ПРОВЕРКА МАТЕМАТИЧЕСКИХ СВОЙСТВ" << endl;
    cout << "═══════════════════════════════════════════════════" << endl;
    
    FiniteArithmetic calc;
    
    // Коммутативность сложения
    cout << "\n1. Коммутативность сложения (a + b = b + a):" << endl;
    string r1 = calc.add("c", "d");
    string r2 = calc.add("d", "c");
    cout << "   c + d = " << r1 << endl;
    cout << "   d + c = " << r2 << endl;
    cout << "   Результат: " << (r1 == r2 ? "✓ Свойство выполняется" : "✗ Ошибка") << endl;
    
    // Коммутативность умножения
    cout << "\n2. Коммутативность умножения (a × b = b × a):" << endl;
    r1 = calc.multiply("c", "e");
    r2 = calc.multiply("e", "c");
    cout << "   c × e = " << r1 << endl;
    cout << "   e × c = " << r2 << endl;
    cout << "   Результат: " << (r1 == r2 ? "✓ Свойство выполняется" : "✗ Ошибка") << endl;
    
    // Ассоциативность сложения
    cout << "\n3. Ассоциативность сложения ((a+b)+c = a+(b+c)):" << endl;
    r1 = calc.add(calc.add("b", "c"), "d");
    r2 = calc.add("b", calc.add("c", "d"));
    cout << "   (b + c) + d = " << r1 << endl;
    cout << "   b + (c + d) = " << r2 << endl;
    cout << "   Результат: " << (r1 == r2 ? "✓ Свойство выполняется" : "✗ Ошибка") << endl;
    
    // Дистрибутивность
    cout << "\n4. Дистрибутивность (a×(b+c) = a×b + a×c):" << endl;
    r1 = calc.multiply("c", calc.add("b", "d"));
    r2 = calc.add(calc.multiply("c", "b"), calc.multiply("c", "d"));
    cout << "   c × (b + d) = " << r1 << endl;
    cout << "   c × b + c × d = " << r2 << endl;
    cout << "   Результат: " << (r1 == r2 ? "✓ Свойство выполняется" : "✗ Ошибка") << endl;
}

void example_multidigit() {
    cout << "\n═══════════════════════════════════════════════════" << endl;
    cout << "  РАБОТА С МНОГОРАЗРЯДНЫМИ ЧИСЛАМИ" << endl;
    cout << "═══════════════════════════════════════════════════" << endl;
    
    FiniteArithmetic calc;
    
    cout << "\n1. Сложение многоразрядных чисел:" << endl;
    cout << "   ba + bc = " << calc.add("ba", "bc") << endl;
    cout << "   Объяснение: (1×8+0) + (1×8+2) = 8 + 10 = 18 = 2×8+2 = cc" << endl;
    
    cout << "\n2. Умножение с многоразрядным результатом:" << endl;
    cout << "   e * e = " << calc.multiply("e", "e") << endl;
    cout << "   Объяснение: 4 × 4 = 16 = 2×8+0 = ca" << endl;
    
    cout << "\n3. Деление многоразрядных чисел:" << endl;
    cout << "   ba ÷ e = " << calc.divide("ba", "e") << endl;
    cout << "   Объяснение: 8 ÷ 4 = 2(0) = c(a)" << endl;
    
    cout << "\n4. Деление с многоразрядным остатком:" << endl;
    cout << "   bcd ÷ e = " << calc.divide("bcd", "e") << endl;
    cout << "   Объяснение: (1×64+2×8+3) ÷ 4 = 83 ÷ 4 = 20(3)" << endl;
}

int main() {
    cout << "\n";
    cout << "╔═══════════════════════════════════════════════════╗" << endl;
    cout << "║  ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ КАЛЬКУЛЯТОРА               ║" << endl;
    cout << "║  Конечная арифметика Z₈ (Вариант 48)             ║" << endl;
    cout << "╚═══════════════════════════════════════════════════╝" << endl;
    
    example_basic_operations();
    example_negative_numbers();
    example_division();
    example_negative_division();
    example_special_cases();
    example_properties();
    example_multidigit();
    
    cout << "\n";
    cout << "═══════════════════════════════════════════════════" << endl;
    cout << "  КОНЕЦ ПРИМЕРОВ" << endl;
    cout << "═══════════════════════════════════════════════════" << endl;
    cout << "\n";
    
    return 0;
}
